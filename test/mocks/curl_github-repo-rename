#!/bin/bash

# Expected values
expected_url="https://api.github.com/repos/old-owner/old-repo"
expected_token="ghp_testtoken123"

# Verify it's a GET request (no -X flag)
if [[ "$*" == *"-X"* ]]; then
    echo "Unexpected HTTP method specified" >&2
    exit 1
fi

# Verify silent mode
if [[ "$*" != *"-s"* ]]; then
    echo "Missing -s flag" >&2
    exit 1
fi

# Verify Authorization header
if [[ "$*" != *"-H Authorization: token ${expected_token}"* ]]; then
    echo "Invalid or missing Authorization header" >&2
    exit 1
fi

# Verify URL
if [[ "$*" != *"${expected_url}"* ]]; then
    echo "Invalid URL: Expected ${expected_url}" >&2
    exit 1
fi

# If all checks pass, return mock response
echo '{"name": "new-repo", "full_name": "new-owner/new-repo", "clone_url": "https://github.com/new-owner/new-repo.git"}' 